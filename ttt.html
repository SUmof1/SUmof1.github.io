<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="./css/tic.css">
  <title>Document</title>
</head>
<body>
   <!-- <div class="back-btn">
<a href="p3.html">â†ž go back</a>
       </div> --> 
        <div class="container">
            <div class="card" data-index="1"></div>
            <div class="card" data-index="2"></div>
            <div class="card" data-index="3"></div>
            <div class="card" data-index="4"></div>
            <div class="card" data-index="5"></div>
            <div class="card" data-index="6"></div>
            <div class="card" data-index="7"></div>
            <div class="card" data-index="8"></div>
            <div class="card" data-index="9"></div>
          </div>
       </body>
       <script>
         const cards = document.querySelectorAll(".card");
const winner = [[1,2,3],[4,5,6],[7,8,9],[1,5,9],[3,5,7],[1,4,7],[2,5,8],[3,6,9]];
let firstPlayer = [], secondPlayer = [], count = 0;
/*******************************************************/
function check(array){
  let finalResult = false;
  for(let item of winner){
    let res = item.every(val => array.indexOf(val) !== -1);
    if(res){
      finalResult = true;
      break;
    }
  }
  return finalResult;
}
/*******************************************************/
function winnerpleyr(p){
  const modal = document.createElement("div");
  const player = document.createTextNode(p);
  const replay = document.createElement("button");
  modal.classList.add("winner");
  modal.appendChild(player);
  replay.appendChild(document.createTextNode("play again"));
  replay.setAttribute("onclick","rep()");
  modal.appendChild(replay);
  document.body.appendChild(modal);
}
/*******************************************************/
function draw(){
  if(this.classList == "card"){
    count++;
    if(count%2 !== 0){
      this.classList.add("x");
      firstPlayer.push(Number(this.dataset.index));
      if(check(firstPlayer)){        
        winnerpleyr("x wins");
      }
    } else{
      this.classList.add("o");
      secondPlayer.push(Number(this.dataset.index));
      if(check(secondPlayer)){
        winnerpleyr("o wins");
      }
    }
    if(count === 9){
      winnerpleyr("tie game");
    }
  }
}
/*******************************************************/
function rep(){
  const w = document.querySelector(".winner");
  cards.forEach(card => card.classList = "card");
  firstPlayer = [];
  secondPlayer = [];
  count = 0;
  w.remove();
}
/*******************************************************/
cards.forEach(card => card.addEventListener("click", draw));
       </script>
</html>